
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.axis path, .axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

circle {

fill: rgba(70, 130, 180, 0.5);

}

</style>
<body>
<input id="nb-points" type="number"/>
<button id="generate-graph" onclick=generatePlot()>Generate Graph!</button>
<br/>
<input id="plot1_log" name="plot1" value="log" type="radio" checked/>
<label for="plot1_log">Log</label>

<input id="plot1_lin" name="plot1" value="linear" type="radio"/>
<label for="plot1_lin">Linear</label>
<br/>

<script src="http://d3js.org/d3.v3.js"></script>
<script>

var data = [];

function generatePlot()
{
    d3.selectAll('svg').remove();
    d3.select('#plot1_log').property('checked', true);

    var dim = 700, padding = 50;

    //var data = [5, 10, 25, 55, 75, 100]

    var numberOfPoints = parseInt(document.getElementById('nb-points').value); 

    data = [];

    for (var i = 0; i < numberOfPoints; i++)
    {
        data.push([Math.random()*10000, Math.random()*10000]);
    }


    var xScale = d3.scale.log().domain([1, 10000]).range([padding,dim-padding]),
        yScale = d3.scale.log().domain([1, 10000]).range([dim-padding,padding]);

    var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(5),
        yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(5);

    var svg = d3.select("body").append("svg").attr("width", dim).attr("height", dim);

    svg.selectAll("circle").data(data).enter()
        .append("circle")
        .attr("cx", function(d) { return xScale(d[0]); })
        .attr("cy", function(d) { return yScale(d[1]); })
        .attr("r", 2);

    svg.append("g").attr("class", "axis x")
        .attr("transform", "translate(0," + (dim - padding) + ")")
        .call(xAxis);
    svg.append("g").attr("class", "axis y")
        .attr("transform", "translate(" + padding + ",0)")
        .call(yAxis);

    d3.select('#plot1_log')
      .on("change", function() { toLog(); });
    d3.select('#plot1_lin')
      .on("change", function() { toLin(); });

    // change to log scale...
    function toLog()
    {
        xScale = d3.scale.log().domain([1, 10000]).range([padding,dim-padding]);
        yScale = d3.scale.log().domain([1, 10000]).range([dim-padding,padding]);

        var pointPosi = svg.selectAll("circle").data(data);

        if (data.length <= 5000)
        {
            pointPosi = pointPosi
            .transition().delay(1000).duration(1000);
        }

        pointPosi
            .attr("cx", function(d) { return xScale(d[0]); })
            .attr("cy", function(d) { return yScale(d[1]); });
    
        svg.selectAll(".x")
            .transition().delay(1000).duration(1000)
            .call(xAxis.scale(xScale));
    
        svg.selectAll(".y")
            .transition().delay(1000).duration(1000)
            .call(yAxis.scale(yScale));
    }

    function toLin()
    {
        xScale = d3.scale.linear().domain([1, 10000]).range([padding,dim-padding]);
        yScale = d3.scale.linear().domain([1, 10000]).range([dim-padding,padding]);
        
        var pointPosi = svg.selectAll('circle').data(data);

        if (data.length <= 5000)
        {
            pointPosi = pointPosi
                .transition().delay(1000).duration(1000);
        }

        pointPosi   
             .attr("cx", function(d) { return xScale(d[0]); })
             .attr("cy", function(d) { return yScale(d[1]); });

        
        svg.selectAll(".x")
            .transition().delay(1000).duration(1000)
            .call(xAxis.scale(xScale));
    
        svg.selectAll(".y")
            .transition().delay(1000).duration(1000)
            .call(yAxis.scale(yScale));
    }
}

</script>

